# Правила разработки кода

Этот документ содержит правила разработки кода для проекта LLM-ассистента. Подробное описание проекта находится в документе @vision.md.

## Основные принципы

1. **Следуйте принципу KISS** - код должен быть максимально простым и понятным.
2. **Разрабатывайте по принципу MVP** - реализуйте только необходимый минимум функциональности.
3. **Минимум зависимостей** - избегайте добавления лишних библиотек.

## Структура кода

- Строго следуйте структуре проекта, описанной в @vision.md.
- Не создавайте дополнительные каталоги без крайней необходимости.
- Каждый файл должен соответствовать своему назначению в архитектуре.

## Стиль кода

- Следуйте PEP 8 для стиля кода Python.
- Максимальная длина строки - 88 символов.
- Используйте типизацию для функций и методов.
- Пишите понятные и краткие комментарии только когда необходимо.

## Работа с данными

- Используйте только in-memory структуры данных (dict/list), как указано в @vision.md.
- Следуйте описанным структурам для сообщений, диалогов и сессий.
- Не используйте внешние базы данных.

## Конфигурирование

- Все настройки храните в файле `.env`.
- Не используйте hardcoded значения в коде.
- Файл `.env` должен быть добавлен в `.gitignore`.
- Поддерживайте актуальный `.env.example`.

## Логирование

- Используйте только стандартный модуль `logging`.
- Логируйте важные события: запуск/остановка приложения, ошибки, запросы к LLM.
- Уровни логирования используйте соответственно: DEBUG, INFO, WARNING, ERROR.

## Telegram бот

- Используйте aiogram для интеграции с Telegram API.
- Следуйте асинхронному подходу при написании кода.
- Четко разделяйте обработчики сообщений и бизнес-логику.

## LLM интеграция

- Используйте openai client для обращения к openrouter.
- Структурируйте запросы в соответствии с API openrouter.
- Обрабатывайте возможные ошибки API.
- Следуйте модели сообщений, описанной в @vision.md.

## Тестирование

- Пишите тесты с использованием pytest.
- Тестируйте критические компоненты системы.
- Используйте моки для внешних зависимостей.

## Общие правила

- Избегайте сложных абстракций и паттернов.
- Приоритизируйте читаемость и простоту кода над элегантностью.
- При сомнениях всегда выбирайте более простое решение.
- При возникновении проблем с архитектурой обращайтесь к @vision.md. 